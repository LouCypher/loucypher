<?xml version="1.0" encoding="UTF-8"?>
<custombutton xmlns:cb="http://xsms.nm.ru/custombuttons/"
              xmlns:html="http://www.w3.org/1999/xhtml">
  <html:head>
    <html:title><![CDATA[Extension List]]></html:title>
    <html:link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAKoSURBVDiNjZNLaJRnFIaf75vvy2UGTWr8NYkxl0IFUYkNXSSZQNWFWlxIEVy1FLLo0i4adddVXRnS4kJwYxci2GaRTWlSFGKFGRXNmFBF62VMO4TENBdjMv9k5p//Oy4SLzgqHs7yPc95eTlHiQjvqniPbVYRzuBoR+FQDEvId4neIPNCY945DayNVff/8NUvn9XXNJMv5hhKnTvYP3ymHmj/IMBSbmHjjP8fycxv+MEzGqtatUI1vK7R7wM4J32XUv3Li/l5imGBkbtXlsMw/PF1jXozg3iP3aM0Z8XRBFDr1fl7Og9EnTguXx30p/6fjAIozb/i6C4BdB2z6QOfH27ZUFNL0QUELs/tycs4J2zdGEerCADTM1P8df3PxyUZiKPF8zyGHpwGFLC6QCCRuYA4QQQ6mw4hjhYT77GN2qiBWFnV5sXc0xMAgfKx5foVYKURB2vLPbxoM8auODE6ws/fH+77dHtjhxp5OHzywpWf/IIsRk25Rq0CRFY4UVNNndkmqZFRf3YuWaYUS0aE3RP5MXX3/iCOgu3Y1WYfL90sdSDgxRoYTY5mZ2anjwC/AqEBdM4tMJ4dwYs1YiOGSBkYrVHqlQNxoC34OV8BdxK9gQ+guo7bwdYdrXu92nU6nR7Pzc/PSXxfazTj30IpRaWpIqbX4UQoBDkWJlRwLzVeLBTyGs2UcUX5duzvsfPqNpvDovQhnBIdELGaWFk1hclYmLx2fxmFbNm5qXJNvdi2DQ1WAsO1P/5petshyf6v25gJ0nxUUUeiP531s/kvAcor7MDOL2pjz3JzVKpqUoMTpb8QsSqdeTT98fomjyDv8LP5aKI3uAgQP2orCkGAVRVMZxbQhnQJIAzkm3s3Js6GSfkEQEd4+bpa8+TW71P1ANqoB65I93OA2DgV+Z+omgAAAABJRU5ErkJggg=="/>
    <html:style type="text/css"><![CDATA[body { font-size: medium; margin: 0; }
body, code:before, help:before, initcode:before {
  font-family: "Verdana", sans-serif;
} 
#wrapper { position: fixed; top: 1em; right: 1em; text-align: center; }
p { font-size: small; text-align: center; }
#button {
  background-image: -moz-linear-gradient(center top, rgb(147, 200, 94) 30%, rgb(85, 168, 2) 55%);
  border: 1px outset rgb(58, 116, 4);
  border-radius: 1em;
  -moz-border-radius: 1em;
  padding: 0;
  text-shadow: 0pt -1px 0pt rgb(58, 116, 4);
  margin-bottom: 1em;
}
#button a {
  color: rgb(255, 255, 255);
  padding: 1em;
  text-decoration: none;
}
#button a, code, code:before, initcode, initcode:before, help, help:before {
  display: block;
}
#credits { position: fixed; bottom: 1em; right: 1em; font-size: small; }
custombutton { background-color: rgb(171, 171, 171); margin: 1em; }
image, mode, accelkey { display: none; }
name { font-weight: bold; font-size: x-large; }
code:before, help:before, initcode:before {
  font-weight: bold;
  font-size: large;
  margin: 0 0 1em;
  padding: .5em;
}
code:before { content: "CODE"; }
help:before { content: "Help"; }
initcode:before { content: "Initialization Code"; }
code, initcode, help {
  background-color: rgb(255, 255, 255);
  border: 1px inset rgb(170, 170, 170);
  font: medium monospace;
  margin: 1em 1em 2em 0;
  padding: 1em;
  text-align: left;
  width: 840px;
  white-space: pre-wrap;
  word-wrap: break-word;
}
.clear { clear: both; }
]]></html:style>
  </html:head>
  <html:body>
    <html:div id="wrapper">
      <html:div id="button">
        <html:a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EExtension%20List%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAKoSURBVDiNjZNLaJRnFIaf75vvy2UGTWr8NYkxl0IFUYkNXSSZQNWFWlxIEVy1FLLo0i4adddVXRnS4kJwYxci2GaRTWlSFGKFGRXNmFBF62VMO4TENBdjMv9k5p//Oy4SLzgqHs7yPc95eTlHiQjvqniPbVYRzuBoR+FQDEvId4neIPNCY945DayNVff/8NUvn9XXNJMv5hhKnTvYP3ymHmj/IMBSbmHjjP8fycxv+MEzGqtatUI1vK7R7wM4J32XUv3Li/l5imGBkbtXlsMw/PF1jXozg3iP3aM0Z8XRBFDr1fl7Og9EnTguXx30p/6fjAIozb/i6C4BdB2z6QOfH27ZUFNL0QUELs/tycs4J2zdGEerCADTM1P8df3PxyUZiKPF8zyGHpwGFLC6QCCRuYA4QQQ6mw4hjhYT77GN2qiBWFnV5sXc0xMAgfKx5foVYKURB2vLPbxoM8auODE6ws/fH+77dHtjhxp5OHzywpWf/IIsRk25Rq0CRFY4UVNNndkmqZFRf3YuWaYUS0aE3RP5MXX3/iCOgu3Y1WYfL90sdSDgxRoYTY5mZ2anjwC/AqEBdM4tMJ4dwYs1YiOGSBkYrVHqlQNxoC34OV8BdxK9gQ+guo7bwdYdrXu92nU6nR7Pzc/PSXxfazTj30IpRaWpIqbX4UQoBDkWJlRwLzVeLBTyGs2UcUX5duzvsfPqNpvDovQhnBIdELGaWFk1hclYmLx2fxmFbNm5qXJNvdi2DQ1WAsO1P/5petshyf6v25gJ0nxUUUeiP531s/kvAcor7MDOL2pjz3JzVKpqUoMTpb8QsSqdeTT98fomjyDv8LP5aKI3uAgQP2orCkGAVRVMZxbQhnQJIAzkm3s3Js6GSfkEQEd4+bpa8+TW71P1ANqoB65I93OA2DgV+Z+omgAAAABJRU5ErkJggg%3D%3D%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5Bfunction%20sort%28aArray%29%20%7B%0A%20%20aArray.sort%28function%28a%2C%20b%29%20%7B%0A%20%20%20%20a%20%3D%20a.name.toLowerCase%28%29%3B%0A%20%20%20%20b%20%3D%20b.name.toLowerCase%28%29%3B%0A%20%20%20%20if%20%28a%20%3C%20b%29%20return%20-1%3B%0A%20%20%20%20if%20%28a%20%3E%20b%29%20return%201%3B%0A%20%20%20%20return%200%3B%0A%20%20%7D%29%0A%7D%0A%0Afunction%20showExtensionList%28aWindow%2C%20aExtensions%29%20%7B%0A%20%20var%20exts%20%3D%20aExtensions%3B%0A%20%20var%20count%20%3D%20exts.length%3B%0A%20%20sort%28exts%2C%20%22name%22%29%3B%0A%20%20var%20extList%20%3D%20navigator.userAgent%20+%20%22%5Cn%5Cn%22%3B%0A%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20exts.length%3B%20i++%29%20%7B%0A%20%20%20%20extList%20+%3D%20%28i%20+%201%29%20+%20%22.%20%22%20+%20exts%5Bi%5D.name%20+%20%22%20%22%20+%20exts%5Bi%5D.version%20+%20%22%5Cn%22%3B%0A%20%20%7D%0A%20%20aWindow.document.title%20%3D%20aWindow.document.title%20+%20%22%20%28%22%20+%20count%20+%20%22%29%22%3B%0A%20%20var%20textbox%20%3D%20aWindow.document.getElementById%28%22textbox%22%29%0A%20%20textbox.value%20%3D%20extList%3B%0A%7D%0A%0Athis.load%20%3D%20function%28aWindow%29%20%7B%0A%20%20try%20%7B%0A%20%20%20%20showExtensionList%28aWindow%2C%20Application.extensions.all%29%3B%0A%20%20%7D%20catch%28e%29%20%7B%0A%20%20%20%20AddonManager.getAddonsByTypes%28%5B%22extension%22%5D%2C%20function%28extensions%29%20%7B%0A%20%20%20%20%20%20showExtensionList%28aWindow%2C%20extensions%29%3B%0A%20%20%20%20%7D%29%0A%20%20%7D%0A%7D%0A%0Athis.copy%20%3D%20function%28aWindow%29%20%7B%0A%20%20var%20text%20%3D%20aWindow.document.getElementById%28%22textbox%22%29.value%3B%0A%20%20if%20%28navigator.platform.indexOf%28%22Win%22%29%29%20%7B%0A%20%20%20%20gClipboard.write%28text%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20gClipboard.write%28text.replace%28/%5Cn/g%2C%20%22%5Cr%5Cn%22%29%29%3B%0A%20%20%7D%0A%7D%0A%0A%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5Bvar%20data%20%3D%20%3Cdialog%20xmlns%3D%7Bxulns%7D%20id%3D%22extensions-list%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20title%3D%22Extension%20List%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%3D%22512%22%20height%3D%22640%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20buttons%3D%22accept%2C%20cancel%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20buttonlabelaccept%3D%22Copy%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20buttonaccesskeyaccept%3D%22C%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20buttonlabelcancel%3D%22Close%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20buttonaccesskeycancel%3D%22C%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ondialogaccept%3D%7B%27opener.document.getElementById%28%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.id%20+%20%27%22%29.copy%28this%29%27%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20onload%3D%7B%27opener.document.getElementById%28%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.id%20+%20%27%22%29.load%28this%29%27%7D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ctextbox%20id%3D%22textbox%22%20flex%3D%221%22%20multiline%3D%22true%22%20/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%3C/dialog%3E%3B%0A%0Adata%20%3D%20%27%3C%3Fxml%20version%3D%221.0%22%3F%3E%27%20+%0A%20%20%20%20%20%20%20%27%3C%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20type%3D%22text/css%22%3F%3E%27%20+%0A%20%20%20%20%20%20%20data%3B%0A%0Avar%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%2C%22%20+%20escape%28data%29%3B%0A%0Avar%20ww%20%3D%20Components.classes%5B%22@mozilla.org/embedcomp/window-watcher%3B1%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.getService%28Components.interfaces.nsIWindowWatcher%29%3B%0Avar%20em%20%3D%20ww.getWindowEnumerator%28%29%3B%0Avar%20winName%20%3D%20%22extlist%22%3B%0Avar%20index%20%3D%201%3B%0Awhile%20%28em.hasMoreElements%28%29%29%20%7B%0A%20%20var%20win%20%3D%20em.getNext%28%29%3B%0A%20%20if%20%28win.name%20%3D%3D%20winName%29%20%7B%0A%20%20%20%20win.focus%28%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20index++%0A%7D%0A%0AopenDialog%28url%2C%20%22extlist%22%2C%20%22chrome%2C%20centerscreen%2C%20dialog%3Dno%22%29%3B%0A%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E" rel="nofollow" title="Extension List">
        <![CDATA[Install this button]]>
        </html:a>
      </html:div>
      <html:a href="https://addons.mozilla.org/addon/custom-buttons/">
        <![CDATA[What's this?]]>
      </html:a>
      <html:div id="credits">
        <html:a href="http://custombuttons.mozdev.org/drupal/node/484">
          <![CDATA[Custom Buttons XML]]><html:br/><![CDATA[Exporter/Importer]]>
        </html:a>
      </html:div>
    </html:div>
  </html:body>

  <name>Extension List</name>
  <image><![CDATA[data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAKoSURBVDiNjZNLaJRnFIaf75vvy2UGTWr8NYkxl0IFUYkNXSSZQNWFWlxIEVy1FLLo0i4adddVXRnS4kJwYxci2GaRTWlSFGKFGRXNmFBF62VMO4TENBdjMv9k5p//Oy4SLzgqHs7yPc95eTlHiQjvqniPbVYRzuBoR+FQDEvId4neIPNCY945DayNVff/8NUvn9XXNJMv5hhKnTvYP3ymHmj/IMBSbmHjjP8fycxv+MEzGqtatUI1vK7R7wM4J32XUv3Li/l5imGBkbtXlsMw/PF1jXozg3iP3aM0Z8XRBFDr1fl7Og9EnTguXx30p/6fjAIozb/i6C4BdB2z6QOfH27ZUFNL0QUELs/tycs4J2zdGEerCADTM1P8df3PxyUZiKPF8zyGHpwGFLC6QCCRuYA4QQQ6mw4hjhYT77GN2qiBWFnV5sXc0xMAgfKx5foVYKURB2vLPbxoM8auODE6ws/fH+77dHtjhxp5OHzywpWf/IIsRk25Rq0CRFY4UVNNndkmqZFRf3YuWaYUS0aE3RP5MXX3/iCOgu3Y1WYfL90sdSDgxRoYTY5mZ2anjwC/AqEBdM4tMJ4dwYs1YiOGSBkYrVHqlQNxoC34OV8BdxK9gQ+guo7bwdYdrXu92nU6nR7Pzc/PSXxfazTj30IpRaWpIqbX4UQoBDkWJlRwLzVeLBTyGs2UcUX5duzvsfPqNpvDovQhnBIdELGaWFk1hclYmLx2fxmFbNm5qXJNvdi2DQ1WAsO1P/5petshyf6v25gJ0nxUUUeiP531s/kvAcor7MDOL2pjz3JzVKpqUoMTpb8QsSqdeTT98fomjyDv8LP5aKI3uAgQP2orCkGAVRVMZxbQhnQJIAzkm3s3Js6GSfkEQEd4+bpa8+TW71P1ANqoB65I93OA2DgV+Z+omgAAAABJRU5ErkJggg==]]></image>
  <mode>0</mode>
  <initcode><![CDATA[function sort(aArray) {
  aArray.sort(function(a, b) {
    a = a.name.toLowerCase();
    b = b.name.toLowerCase();
    if (a < b) return -1;
    if (a > b) return 1;
    return 0;
  })
}

function showExtensionList(aWindow, aExtensions) {
  var exts = aExtensions;
  var count = exts.length;
  sort(exts, "name");
  var extList = navigator.userAgent + "\n\n";
  for (var i = 0; i < exts.length; i++) {
    extList += (i + 1) + ". " + exts[i].name + " " + exts[i].version + "\n";
  }
  aWindow.document.title = aWindow.document.title + " (" + count + ")";
  var textbox = aWindow.document.getElementById("textbox")
  textbox.value = extList;
}

this.load = function(aWindow) {
  try {
    showExtensionList(aWindow, Application.extensions.all);
  } catch(e) {
    AddonManager.getAddonsByTypes(["extension"], function(extensions) {
      showExtensionList(aWindow, extensions);
    })
  }
}

this.copy = function(aWindow) {
  var text = aWindow.document.getElementById("textbox").value;
  if (navigator.platform.indexOf("Win")) {
    gClipboard.write(text);
  } else {
    gClipboard.write(text.replace(/\n/g, "\r\n"));
  }
}

]]></initcode>
  <code><![CDATA[var data = <dialog xmlns={xulns} id="extensions-list"
                   title="Extension List"
                   width="512" height="640"
                   buttons="accept, cancel"
                   buttonlabelaccept="Copy"
                   buttonaccesskeyaccept="C"
                   buttonlabelcancel="Close"
                   buttonaccesskeycancel="C"
                   ondialogaccept={'opener.document.getElementById("' +
                                   this.id + '").copy(this)'}
                   onload={'opener.document.getElementById("' +
                           this.id + '").load(this)'}>
             <textbox id="textbox" flex="1" multiline="true" />
           </dialog>;

data = '<?xml version="1.0"?>' +
       '<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>' +
       data;

var url = "data:application/vnd.mozilla.xul+xml," + escape(data);

var ww = Components.classes["@mozilla.org/embedcomp/window-watcher;1"]
                   .getService(Components.interfaces.nsIWindowWatcher);
var em = ww.getWindowEnumerator();
var winName = "extlist";
var index = 1;
while (em.hasMoreElements()) {
  var win = em.getNext();
  if (win.name == winName) {
    win.focus();
    return;
  }
  index++
}

openDialog(url, "extlist", "chrome, centerscreen, dialog=no");
]]></code>
  <accelkey><![CDATA[]]></accelkey>
  <help><![CDATA[]]></help>
  <attributes/>
</custombutton>
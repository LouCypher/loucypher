<?xml version="1.0" encoding="UTF-8"?>
<custombutton xmlns:cb="http://xsms.nm.ru/custombuttons/"
              xmlns:html="http://www.w3.org/1999/xhtml">
  <html:head>
    <html:title><![CDATA[Copy button data to HTML]]></html:title>
    <html:link rel="shortcut icon" href=""/>
    <html:style type="text/css"><![CDATA[body { font-size: medium; margin: 0; }
body, code:before, help:before, initcode:before {
  font-family: "Verdana", sans-serif;
} 
#wrapper { position: fixed; top: 1em; right: 1em; text-align: center; }
p { font-size: small; text-align: center; }
#button {
  background-image: -moz-linear-gradient(center top, rgb(147, 200, 94) 30%, rgb(85, 168, 2) 55%);
  border: 1px outset rgb(58, 116, 4);
  border-radius: 1em;
  padding: 0;
  text-shadow: 0pt -1px 0pt rgb(58, 116, 4);
  margin-bottom: 1em;
}
#button a {
  color: rgb(255, 255, 255);
  padding: 1em;
  text-decoration: none;
}
#button a, code, code:before, initcode, initcode:before, help, help:before {
  display: block;
}
#credits { position: fixed; bottom: 1em; right: 1em; font-size: small; }
custombutton { background-color: rgb(171, 171, 171); margin: 1em; }
image, mode, accelkey { display: none; }
name { font-weight: bold; font-size: x-large; }
code:before, help:before, initcode:before {
  font-weight: bold;
  font-size: large;
  margin: 0 0 1em;
  padding: .5em;
}
code:before { content: "CODE"; }
help:before { content: "Help"; }
initcode:before { content: "Initialization Code"; }
code, initcode, help {
  background-color: rgb(255, 255, 255);
  border: 1px inset rgb(170, 170, 170);
  font: medium monospace;
  margin: 1em 1em 2em 0;
  padding: 1em;
  text-align: left;
  width: 840px;
  white-space: pre-wrap;
  word-wrap: break-word;
}
.clear { clear: both; }
]]></html:style>
  </html:head>
  <html:body>
    <html:div id="wrapper">
      <html:div id="button">
        <html:a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3ECopy%20button%20data%20to%20HTML%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bcustombuttons-stdicon-3%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*CODE*/%0Avar%20id1%20%3D%20%22custombuttons-contextpopup-copyImageURI%22%3B%0Avar%20id2%20%3D%20%22custombuttons-contextpopup-saveButtonImage%22%3B%0Avar%20id3%20%3D%20%22custombuttons-contextpopup-copyButtonsCodeText%22%3B%0Avar%20id4%20%3D%20%22custombuttons-contextpopup-copyAsHTML%22%3B%0Avar%20id5%20%3D%20%22custombuttons-contextpopup-copyImageURI-sub%22%3B%0Avar%20id6%20%3D%20%22custombuttons-contextpopup-saveButtonImage-sub%22%3B%0Avar%20id7%20%3D%20%22custombuttons-contextpopup-copyButtonsCodeText-sub%22%3B%0Avar%20id8%20%3D%20%22custombuttons-contextpopup-copyAsHTML-sub%22%3B%0A%0Afunction%20removeNode%28id%29%20%7B%0A%20%20var%20node%20%3D%20document.getElementById%28id%29%3B%0A%20%20node%20%26%26%20node.parentNode.removeChild%28node%29%3B%0A%7D%0A%0Afunction%20copyImageURI%28%29%20%7B%0A%20%20var%20btn%20%3D%20document.popupNode%3B%0A%20%20if%20%28%21btn%29%20return%3B%0A%20%20cbu.gClipboard.write%28btn.image%29%3B%0A%7D%0A%0Afunction%20copyToHTMLCode%28%29%20%7B%0A%20%20var%20btn%20%3D%20document.popupNode%3B%0A%20%20if%20%28%21btn%29%20return%3B%0A%20%20var%20code%20%3D%20%22%3Cp%3E%3Cdiv%20id%3D%5C%22install%5C%22%20style%3D%5C%22background%3A%20transparent%20-moz-linear-gradient%28center%20top%20%2C%20rgb%28147%2C%20200%2C%2094%29%2030%25%2C%20rgb%2885%2C%20168%2C%202%29%2055%25%29%3B%20text-shadow%3A%200pt%20-1px%200pt%20rgb%2858%2C%20116%2C%204%29%3B%20border%3A%201px%20outset%20rgb%2858%2C%20116%2C%204%29%3B%20border-radius%3A%201em%3B%20padding%3A%200%3B%20width%3A%20200px%3B%20text-align%3A%20center%3B%5C%22%3E%3Ca%20href%3D%5C%22%22%20+%20btn.URI%20+%20%22%5C%22%20style%3D%5C%22display%3A%20block%3B%20padding%3A%201em%3B%20color%3A%20%23ffffff%3B%20text-decoration%3A%20none%3B%5C%22%20title%3D%5C%22Click%20here%20to%20install%20%22%20+%20btn.name%20+%20%22%5C%22%20rel%3D%5C%22nofollow%5C%22%3E%3Cimg%20src%3D%5C%22%22%20+%20btn.image%20+%20%22%5C%22%20alt%3D%5C%22%22%20+%20btn.name%20+%20%22%5C%22%20style%3D%5C%22vertical-align%3A%20middle%3B%20float%3A%20left%3B%5C%22/%3E%22%20+%20btn.name%20+%20%22%3C/a%3E%3C/div%3E%3C/p%3E%22%3B%0A%20%20cbu.gClipboard.write%28code%29%3B%20//.toXMLString%28%29%29%3B%0A%7D%0A%0Afunction%20saveImageURI%28%29%20%7B%0A%20%20var%20btn%20%3D%20document.popupNode%3B%0A%20%20if%20%28%21btn%29%20return%3B%0A%20%20if%20%28btn.image%20%21%3D%20%22%22%29%20saveImageURL%28btn.image%2C%20btn.name%29%3B%0A%20%20else%20custombuttons.alertBox%28btn.name%2C%20%22This%20button%20has%20no%20image%21%22%29%3B%0A%7D%0A%0Afunction%20copyButtonsCodeText%28%29%20%7B%0A%20%20var%20btn%20%3D%20document.popupNode%3B%0A%20%20if%20%28%21btn%29%20return%3B%0A%20%20var%20code%20%3D%20%28%28btn.cbCommand%20%3D%3D%20%22%22%29%20%7C%7C%20%28btn.Command%20%3D%3D%20%22/*CODE*/%22%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3F%20%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20%28%22%5Cn/*CODE*/%5Cn%22%20+%20btn.cbCommand%20+%20%22%5Cn%22%29%3B%0A%20%20var%20init%20%3D%20%28%28btn.cbInitCode%20%3D%3D%20%22%22%29%20%7C%7C%20%28btn.cbInitCode%20%3D%3D%20%22/*Initialization%20Code*/%22%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3F%20%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20%28%22%5Cn/*Initialization%20Code*/%5Cn%22%20+%20btn.cbInitCode%29%3B%0A%20%20cbu.gClipboard.write%28code%20+%20init%29%3B%0A%7D%0A%0Aif%20%28document.getElementById%28id1%29%29%20%7B%0A%20%20removeNode%28id1%29%3B%0A%20%20removeNode%28id2%29%3B%0A%20%20removeNode%28id3%29%3B%0A%20%20removeNode%28id4%29%3B%0A%20%20removeNode%28id5%29%3B%0A%20%20removeNode%28id6%29%3B%0A%20%20removeNode%28id7%29%3B%0A%20%20removeNode%28id8%29%3B%0A%20%20this.checked%20%3D%20false%3B%0A%20%20return%3B%0A%7D%0A%0Avar%20cbcp1%20%3D%20document.getElementById%28%22custombuttons-contextpopup%22%29%3B%0Avar%20cbcp2%20%3D%20document.getElementById%28%22custombuttons-contextpopup-sub%22%29%3B%0A%0Avar%20mi1%20%3D%20cbu.makeXML%28%3Cmenuitem%20xmlns%3D%7Bxulns%7D%20id%3D%7Bid1%7D%20class%3D%22menuitem-iconic%22%20label%3D%22Copy%20Image%20Data%22/%3E%29%3B%0Avar%20mi2%20%3D%20cbu.makeXML%28%3Cmenuitem%20xmlns%3D%7Bxulns%7D%20id%3D%7Bid2%7D%20class%3D%22menuitem-iconic%22%20label%3D%22Save%20Button%27s%20Image%22/%3E%29%3B%0Avar%20mi3%20%3D%20cbu.makeXML%28%3Cmenuitem%20xmlns%3D%7Bxulns%7D%20id%3D%7Bid3%7D%20class%3D%22menuitem-iconic%22%20label%3D%22Copy%20Button%27s%20Code%20to%20Text%22/%3E%29%3B%0Avar%20mi4%20%3D%20cbu.makeXML%28%3Cmenuitem%20xmlns%3D%7Bxulns%7D%20id%3D%7Bid4%7D%20class%3D%22menuitem-iconic%22%20label%3D%22Copy%20Button%20To%20HTML%20Code%22/%3E%29%3B%0Avar%20mi5%20%3D%20cbu.makeXML%28%3Cmenuitem%20xmlns%3D%7Bxulns%7D%20id%3D%7Bid5%7D%20class%3D%22menuitem-iconic%22%20label%3D%22Copy%20Image%20Data%22/%3E%29%3B%0Avar%20mi6%20%3D%20cbu.makeXML%28%3Cmenuitem%20xmlns%3D%7Bxulns%7D%20id%3D%7Bid6%7D%20class%3D%22menuitem-iconic%22%20label%3D%22Save%20Button%27s%20Image%22/%3E%29%3B%0Avar%20mi7%20%3D%20cbu.makeXML%28%3Cmenuitem%20xmlns%3D%7Bxulns%7D%20id%3D%7Bid7%7D%20class%3D%22menuitem-iconic%22%20label%3D%22Copy%20Button%27s%20Code%20to%20Text%22/%3E%29%3B%0Avar%20mi8%20%3D%20cbu.makeXML%28%3Cmenuitem%20xmlns%3D%7Bxulns%7D%20id%3D%7Bid8%7D%20class%3D%22menuitem-iconic%22%20label%3D%22Copy%20Button%20To%20HTML%20Code%22/%3E%29%3B%0A%0Ami1.onclick%20%3D%20mi5.onclick%20%3D%20copyImageURI%3B%0Ami2.onclick%20%3D%20mi6.onclick%20%3D%20saveImageURI%3B%0Ami3.onclick%20%3D%20mi7.onclick%20%3D%20copyButtonsCodeText%3B%0Ami4.onclick%20%3D%20mi8.onclick%20%3D%20copyToHTMLCode%3B%0A%0Acbcp1.insertBefore%28mi4%2C%20cbcp1.firstChild%29%3B%0Acbcp1.insertBefore%28mi3%2C%20cbcp1.firstChild%29%3B%0Acbcp1.insertBefore%28mi2%2C%20cbcp1.firstChild%29%3B%0Acbcp1.insertBefore%28mi1%2C%20cbcp1.firstChild%29%3B%0A%0Acbcp2.insertBefore%28mi8%2C%20cbcp2.firstChild%29%3B%0Acbcp2.insertBefore%28mi7%2C%20cbcp2.firstChild%29%3B%0Acbcp2.insertBefore%28mi6%2C%20cbcp2.firstChild%29%3B%0Acbcp2.insertBefore%28mi5%2C%20cbcp2.firstChild%29%3B%0A%0Athis.checked%20%3D%20true%3B%0A%0A%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%3C%21%5BCDATA%5BOriginal%20code%20by%20antonglv%0Ahttp%3A//custombuttons.mozdev.org/%5D%5D%3E%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E" title="Copy button data to HTML">
        <![CDATA[Install this button]]>
        </html:a>
      </html:div>
      <html:a href="https://addons.mozilla.org/addon/custom-buttons/">
        <![CDATA[What's this?]]>
      </html:a>
      <html:div id="credits">
        <html:a href="http://custombuttons.mozdev.org/drupal/node/484">
          <![CDATA[Custom Buttons XML]]><html:br/><![CDATA[Exporter/Importer]]>
        </html:a>
      </html:div>
    </html:div>
  </html:body>

  <name>Copy button data to HTML</name>
  <image><![CDATA[custombuttons-stdicon-3]]></image>
  <mode>0</mode>
  <initcode><![CDATA[]]></initcode>
  <code><![CDATA[/*CODE*/
var id1 = "custombuttons-contextpopup-copyImageURI";
var id2 = "custombuttons-contextpopup-saveButtonImage";
var id3 = "custombuttons-contextpopup-copyButtonsCodeText";
var id4 = "custombuttons-contextpopup-copyAsHTML";
var id5 = "custombuttons-contextpopup-copyImageURI-sub";
var id6 = "custombuttons-contextpopup-saveButtonImage-sub";
var id7 = "custombuttons-contextpopup-copyButtonsCodeText-sub";
var id8 = "custombuttons-contextpopup-copyAsHTML-sub";

function removeNode(id) {
  var node = document.getElementById(id);
  node && node.parentNode.removeChild(node);
}

function copyImageURI() {
  var btn = document.popupNode;
  if (!btn) return;
  cbu.gClipboard.write(btn.image);
}

function copyToHTMLCode() {
  var btn = document.popupNode;
  if (!btn) return;
  var code = "<p><div id=\"install\" style=\"background: transparent -moz-linear-gradient(center top , rgb(147, 200, 94) 30%, rgb(85, 168, 2) 55%); text-shadow: 0pt -1px 0pt rgb(58, 116, 4); border: 1px outset rgb(58, 116, 4); border-radius: 1em; padding: 0; width: 200px; text-align: center;\"><a href=\"" + btn.URI + "\" style=\"display: block; padding: 1em; color: #ffffff; text-decoration: none;\" title=\"Click here to install " + btn.name + "\" rel=\"nofollow\"><img src=\"" + btn.image + "\" alt=\"" + btn.name + "\" style=\"vertical-align: middle; float: left;\"/>" + btn.name + "</a></div></p>";
  cbu.gClipboard.write(code); //.toXMLString());
}

function saveImageURI() {
  var btn = document.popupNode;
  if (!btn) return;
  if (btn.image != "") saveImageURL(btn.image, btn.name);
  else custombuttons.alertBox(btn.name, "This button has no image!");
}

function copyButtonsCodeText() {
  var btn = document.popupNode;
  if (!btn) return;
  var code = ((btn.cbCommand == "") || (btn.Command == "/*CODE*/"))
              ? ""
              : ("\n/*CODE*/\n" + btn.cbCommand + "\n");
  var init = ((btn.cbInitCode == "") || (btn.cbInitCode == "/*Initialization Code*/"))
              ? ""
              : ("\n/*Initialization Code*/\n" + btn.cbInitCode);
  cbu.gClipboard.write(code + init);
}

if (document.getElementById(id1)) {
  removeNode(id1);
  removeNode(id2);
  removeNode(id3);
  removeNode(id4);
  removeNode(id5);
  removeNode(id6);
  removeNode(id7);
  removeNode(id8);
  this.checked = false;
  return;
}

var cbcp1 = document.getElementById("custombuttons-contextpopup");
var cbcp2 = document.getElementById("custombuttons-contextpopup-sub");

var mi1 = cbu.makeXML(<menuitem xmlns={xulns} id={id1} class="menuitem-iconic" label="Copy Image Data"/>);
var mi2 = cbu.makeXML(<menuitem xmlns={xulns} id={id2} class="menuitem-iconic" label="Save Button's Image"/>);
var mi3 = cbu.makeXML(<menuitem xmlns={xulns} id={id3} class="menuitem-iconic" label="Copy Button's Code to Text"/>);
var mi4 = cbu.makeXML(<menuitem xmlns={xulns} id={id4} class="menuitem-iconic" label="Copy Button To HTML Code"/>);
var mi5 = cbu.makeXML(<menuitem xmlns={xulns} id={id5} class="menuitem-iconic" label="Copy Image Data"/>);
var mi6 = cbu.makeXML(<menuitem xmlns={xulns} id={id6} class="menuitem-iconic" label="Save Button's Image"/>);
var mi7 = cbu.makeXML(<menuitem xmlns={xulns} id={id7} class="menuitem-iconic" label="Copy Button's Code to Text"/>);
var mi8 = cbu.makeXML(<menuitem xmlns={xulns} id={id8} class="menuitem-iconic" label="Copy Button To HTML Code"/>);

mi1.onclick = mi5.onclick = copyImageURI;
mi2.onclick = mi6.onclick = saveImageURI;
mi3.onclick = mi7.onclick = copyButtonsCodeText;
mi4.onclick = mi8.onclick = copyToHTMLCode;

cbcp1.insertBefore(mi4, cbcp1.firstChild);
cbcp1.insertBefore(mi3, cbcp1.firstChild);
cbcp1.insertBefore(mi2, cbcp1.firstChild);
cbcp1.insertBefore(mi1, cbcp1.firstChild);

cbcp2.insertBefore(mi8, cbcp2.firstChild);
cbcp2.insertBefore(mi7, cbcp2.firstChild);
cbcp2.insertBefore(mi6, cbcp2.firstChild);
cbcp2.insertBefore(mi5, cbcp2.firstChild);

this.checked = true;

]]></code>
  <accelkey><![CDATA[]]></accelkey>
  <help><![CDATA[Original code by antonglv
http://custombuttons.mozdev.org/]]></help>
  <attributes/>
</custombutton>
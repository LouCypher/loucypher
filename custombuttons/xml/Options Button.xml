<?xml version="1.0" encoding="UTF-8"?>
<custombutton xmlns:cb="http://xsms.nm.ru/custombuttons/"
              xmlns:html="http://www.w3.org/1999/xhtml">
  <html:head>
    <html:title><![CDATA[Options Button]]></html:title>
    <html:link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAEG0lEQVR4AQEQBO/7Af///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEqrzO8SwnIg7x8vcAAQECAPf5+gD+/P8A+/3+APv6/wAAAQAA/vz7AP38/AD7/PwA+Pj2APj39wAEAgAAs7a58gQPCAIO497gAEc/MADU19sAMi0jAPn7+gD6+vwA+Pj4AAwLCwD6+/sAAPMHAAT+AwD5A/cAAwsAANbc6AAtKR8OAvHy9QBDPy8A/QAAAGRseAAAAQIA8vP3APHw9ADv8PUA8PL1APLm/ABn11EAR9YlAGavaADt6PYAJR8VAPX19wAC/v7/AP//AAADAAAADAsJAAYDAAAJCQcABAYDAAICAAAAAQAAFhASANDp1QAGSuAA6+noAA0KDAD9AAEA/v7+AAQCAwMA09XdAOXn7QBAP0IAtLzKAPz8/QArKSAABAQEAAL/AgD+C/0AUQVXAMx+ywBVNlAA/wT+AAMDAwAA/v0ABAIAAADo6u4AHh8ZABQTDwD49/kA1dngABEQCwAdGxgAAwUEAPD18AB+QXwACkgIAPH39QDt+PYAEw0PAP39/wAE+fr+AC8pIQCRmrIAo6SdAFxbXQDn5uQANjMoAAMEAgAFBQUA//jzAKzExgDy+AAABfPhAFRTWQAGBQgA///9AAT6+PsAJSAYAJSGZgDt7NgAlYdsAPT4/ADp6+4A7u7yAPME8wAOBvoAx9n3ACJWLQDgntIA7vDrAPD4/gD+AP8ABPv//wDt8fUA//8AAPTz9wDp7fEA7e7xAPn5+QD8/f4AAgEFAAAFCAA0Fu4A1ZmqADo2JgD6AggABf4BAAEAAAAE/fz9APf39gAEBAcAAAMCAP7+AAAAAP4A////AAAAAAD//v4A6e38ADlJSwBBVAoA8/b7APLs+AASFAYAAQABAAT9/PsA//7/AP79/QABAQEA/Pz8APz8AAD9/v4AAP8AAP3/AADw/P8A7MbEAPz09QDn7+4AMk5hAAEBBgAAAf8AAvr8+wD9/v8A+/z+AAABAAD9/v4A/f/8AP78/gD8/v4A/f3+AAgVFgD8ysoAN/HwAO7o6AAFDBEA/gQGAAD/AQAC+/n7AAMDAwD8/vsA8/L1APz6/QD8+v4A/P79AP39/wD9/v0ACwICAOYYGACfz88AIykpAAL/AQACBgIAAAL/AAGOmK3/GxsWADgxKADb3+EAHxwbAPv9+wD7+fsAAQICAAEDBQD/AgUACBcWAAYLAAD49QAA+vYAAN7b3gDHu7IAAVFfd/FQSUIO8vX1AAMDAwD8+/sA/v3+AP7//gD+/fwA////AP3+/AD//wEAAQEAAAEBAQADAgEADA4NAJ2dpfVqDp6HbGR0yQAAAABJRU5ErkJggg=="/>
    <html:style type="text/css"><![CDATA[body { font-size: medium; margin: 0; }
body, code:before, help:before, initcode:before {
  font-family: "Verdana", sans-serif;
}
#wrapper { position: fixed; top: 1em; right: 1em; text-align: center; }
p { font-size: small; text-align: center; }
#button {
  background-image: -moz-linear-gradient(center top, rgb(147, 200, 94) 30%, rgb(85, 168, 2) 55%);
  border: 1px outset rgb(58, 116, 4);
  border-radius: 1em;
  -moz-border-radius: 1em;
  padding: 0;
  text-shadow: 0pt -1px 0pt rgb(58, 116, 4);
  margin-bottom: 1em;
}
#button a {
  color: rgb(255, 255, 255);
  padding: 1em;
  text-decoration: none;
}
#button a, code, code:before, initcode, initcode:before, help, help:before {
  display: block;
}
#credits { position: fixed; bottom: 1em; right: 1em; font-size: small; }
custombutton { background-color: rgb(171, 171, 171); margin: 1em; }
image, mode, accelkey { display: none; }
name { font-weight: bold; font-size: x-large; }
code:before, help:before, initcode:before {
  font-weight: bold;
  font-size: large;
  margin: 0 0 1em;
  padding: .5em;
}
code:before { content: "CODE"; }
help:before { content: "Help"; }
initcode:before { content: "Initialization Code"; }
code, initcode, help {
  background-color: rgb(255, 255, 255);
  border: 1px inset rgb(170, 170, 170);
  font: medium monospace;
  margin: 1em 1em 2em 0;
  padding: 1em;
  text-align: left;
  width: 840px;
  white-space: pre-wrap;
  word-wrap: break-word;
}
.clear { clear: both; }
]]></html:style>
  </html:head>
  <html:body>
    <html:div id="wrapper">
      <html:div id="button">
        <html:a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EOptions%20Button%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAEG0lEQVR4AQEQBO/7Af///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEqrzO8SwnIg7x8vcAAQECAPf5+gD+/P8A+/3+APv6/wAAAQAA/vz7AP38/AD7/PwA+Pj2APj39wAEAgAAs7a58gQPCAIO497gAEc/MADU19sAMi0jAPn7+gD6+vwA+Pj4AAwLCwD6+/sAAPMHAAT+AwD5A/cAAwsAANbc6AAtKR8OAvHy9QBDPy8A/QAAAGRseAAAAQIA8vP3APHw9ADv8PUA8PL1APLm/ABn11EAR9YlAGavaADt6PYAJR8VAPX19wAC/v7/AP//AAADAAAADAsJAAYDAAAJCQcABAYDAAICAAAAAQAAFhASANDp1QAGSuAA6+noAA0KDAD9AAEA/v7+AAQCAwMA09XdAOXn7QBAP0IAtLzKAPz8/QArKSAABAQEAAL/AgD+C/0AUQVXAMx+ywBVNlAA/wT+AAMDAwAA/v0ABAIAAADo6u4AHh8ZABQTDwD49/kA1dngABEQCwAdGxgAAwUEAPD18AB+QXwACkgIAPH39QDt+PYAEw0PAP39/wAE+fr+AC8pIQCRmrIAo6SdAFxbXQDn5uQANjMoAAMEAgAFBQUA//jzAKzExgDy+AAABfPhAFRTWQAGBQgA///9AAT6+PsAJSAYAJSGZgDt7NgAlYdsAPT4/ADp6+4A7u7yAPME8wAOBvoAx9n3ACJWLQDgntIA7vDrAPD4/gD+AP8ABPv//wDt8fUA//8AAPTz9wDp7fEA7e7xAPn5+QD8/f4AAgEFAAAFCAA0Fu4A1ZmqADo2JgD6AggABf4BAAEAAAAE/fz9APf39gAEBAcAAAMCAP7+AAAAAP4A////AAAAAAD//v4A6e38ADlJSwBBVAoA8/b7APLs+AASFAYAAQABAAT9/PsA//7/AP79/QABAQEA/Pz8APz8AAD9/v4AAP8AAP3/AADw/P8A7MbEAPz09QDn7+4AMk5hAAEBBgAAAf8AAvr8+wD9/v8A+/z+AAABAAD9/v4A/f/8AP78/gD8/v4A/f3+AAgVFgD8ysoAN/HwAO7o6AAFDBEA/gQGAAD/AQAC+/n7AAMDAwD8/vsA8/L1APz6/QD8+v4A/P79AP39/wD9/v0ACwICAOYYGACfz88AIykpAAL/AQACBgIAAAL/AAGOmK3/GxsWADgxKADb3+EAHxwbAPv9+wD7+fsAAQICAAEDBQD/AgUACBcWAAYLAAD49QAA+vYAAN7b3gDHu7IAAVFfd/FQSUIO8vX1AAMDAwD8+/sA/v3+AP7//gD+/fwA////AP3+/AD//wEAAQEAAAEBAQADAgEADA4NAJ2dpfVqDp6HbGR0yQAAAABJRU5ErkJggg%3D%3D%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B/*%20*****%20BEGIN%20LICENSE%20BLOCK%20*****%0A%20*%20Version%3A%20MPL%201.1/GPL%202.0/LGPL%202.1%0A%20*%0A%20*%20The%20contents%20of%20this%20file%20are%20subject%20to%20the%20Mozilla%20Public%20License%20Version%0A%20*%201.1%20%28the%20%22License%22%29%3B%20you%20may%20not%20use%20this%20file%20except%20in%20compliance%20with%0A%20*%20the%20License.%20You%20may%20obtain%20a%20copy%20of%20the%20License%20at%0A%20*%20http%3A//www.mozilla.org/MPL/%0A%20*%0A%20*%20Software%20distributed%20under%20the%20License%20is%20distributed%20on%20an%20%22AS%20IS%22%20basis%2C%0A%20*%20WITHOUT%20WARRANTY%20OF%20ANY%20KIND%2C%20either%20express%20or%20implied.%20See%20the%20License%0A%20*%20for%20the%20specific%20language%20governing%20rights%20and%20limitations%20under%20the%0A%20*%20License.%0A%20*%0A%20*%20Original%20code%20is%20Options%20Dialog%20Options%20extension%20for%20Firefox%0A%20*%20http%3A//loucypher.wordpress.com/projects/extensions/%23options-dialog-options%0A%20*%0A%20*%20The%20Initial%20Developer%20of%20the%20Original%20Code%20is%20LouCypher.%0A%20*%20Portions%20created%20by%20the%20Initial%20Developer%20are%20Copyright%20%28C%29%202007%0A%20*%20the%20Initial%20Developer.%20All%20Rights%20Reserved.%0A%20*%0A%20*%20Contributor%28s%29%3A%0A%20*%20%20LouCypher%20%3Cloucypher@mozillaca.com%3E%0A%20*%0A%20*%20Alternatively%2C%20the%20contents%20of%20this%20file%20may%20be%20used%20under%20the%20terms%20of%0A%20*%20either%20the%20GNU%20General%20Public%20License%20Version%202%20or%20later%20%28the%20%22GPL%22%29%2C%20or%0A%20*%20the%20GNU%20Lesser%20General%20Public%20License%20Version%202.1%20or%20later%20%28the%20%22LGPL%22%29%2C%0A%20*%20in%20which%20case%20the%20provisions%20of%20the%20GPL%20or%20the%20LGPL%20are%20applicable%20instead%0A%20*%20of%20those%20above.%20If%20you%20wish%20to%20allow%20use%20of%20your%20version%20of%20this%20file%20only%0A%20*%20under%20the%20terms%20of%20either%20the%20GPL%20or%20the%20LGPL%2C%20and%20not%20to%20allow%20others%20to%0A%20*%20use%20your%20version%20of%20this%20file%20under%20the%20terms%20of%20the%20MPL%2C%20indicate%20your%0A%20*%20decision%20by%20deleting%20the%20provisions%20above%20and%20replace%20them%20with%20the%20notice%0A%20*%20and%20other%20provisions%20required%20by%20the%20GPL%20or%20the%20LGPL.%20If%20you%20do%20not%20delete%0A%20*%20the%20provisions%20above%2C%20a%20recipient%20may%20use%20your%20version%20of%20this%20file%20under%0A%20*%20the%20terms%20of%20any%20one%20of%20the%20MPL%2C%20the%20GPL%20or%20the%20LGPL.%0A%20*%0A%20*%20*****%20END%20LICENSE%20BLOCK%20*****%20*/%0A%0Athis.label%20%3D%20%22Options%22%3B%0Athis.tooltipText%20%3D%20Application.name%20+%20%22%20%22%20+%20this.label%3B%0A%0Athis.openPrefs%20%3D%20function%20openPrefs%28aEvent%29%20%7B%0A%20%20if%20%28aEvent%29%20%7B%0A%20%20%20%20var%20paneId%20%3D%20aEvent.target.id.match%28/pane.*/%29.toString%28%29%3B%0A%20%20%7D%0A%0A%20%20var%20features%20%3D%20%22chrome%2C%20dialog%2C%20titlebar%2C%20toolbar%2C%20centerscreen%2C%20minimizable%2C%20resizable%22%3B%0A%0A%20%20var%20wm%20%3D%20Cc%5B%22@mozilla.org/appshell/window-mediator%3B1%22%5D%0A%20%20%20%20.getService%28Ci.nsIWindowMediator%29%3B%0A%0A%20%20var%20win%20%3D%20wm.getMostRecentWindow%28%22Browser%3APreferences%22%29%3B%0A%20%20if%20%28win%29%20%7B%0A%20%20%20%20win.focus%28%29%3B%0A%20%20%20%20if%20%28paneId%29%20%7B%0A%20%20%20%20%20%20var%20pane%20%3D%20win.document.getElementById%28paneId%29%3B%0A%20%20%20%20%20%20win.document.documentElement.showPane%28pane%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%20else%20%7B%0A%20%20%20%20openDialog%28%22chrome%3A//browser/content/preferences/preferences.xul%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Preferences%22%2C%20features%2C%20paneId%29%3B%0A%20%20%7D%0A%7D%0A%0A/*%0Athis.onmouseover%20%3D%20function%20openPopup%28%29%20%7B%0A%20%20let%20x%20%3D%20this.boxObject.x%3B%0A%20%20let%20y%20%3D%20this.boxObject.y%20+%20this.boxObject.height%3B%0A%20%20this.firstChild.openPopup%28null%2C%20%22after_start%22%2C%20x%2C%20y%2C%20false%2C%20false%29%3B%0A%7D%0A%0Athis.onmouseout%20%3D%20function%20hidePopup%28%29%20%7B%0A%20%20this.firstChild.hidePopup%28%29%3B%0A%7D%0A*/%0A%0Athis.popupShowing%20%3D%20function%20popupShowing%28aEvent%29%20%7B%0A%20%20//%20check%20Firefox%20version%0A%20%20var%20isFF4%20%3D%20%28Application.version%20%3E%3D%20%224.0%22%29%3B%0A%0A%20%20//%20check%20if%20Download%20Manager%20Tweak%20extension%20is%20installed%20and%20is%20enabled%0A%20%20//%20https%3A//addons.mozilla.org/firefox/addon/download-manager-tweak/%0A%20%20var%20dmt%20%3D%20%22dmtDownloadManager%22%20in%20window%3B%0A%0A%20%20//%20check%20if%20Firefox%20Sync%20is%20installed%20and%20is%20enabled%20%28prior%20to%20Firefox%204%29%0A%20%20var%20weave%20%3D%20%22gWeaveWin%22%20in%20window%3B%0A%20%20var%20sync%20%3D%20%22gSyncUI%22%20in%20window%3B%0A%0A%20%20var%20paneSync%20%3D%20document.getElementById%28%22cb-paneSync%22%29%3B%0A%0A%20%20//%20hide%20Sync%20menu%20if%20it%27s%20not%20Firefox%204%20and%20Firefox%20Sync%20is%20not%20installed%20or%20is%20disabled%0A%20%20paneSync.hidden%20%3D%20%21%28weave%20%7C%7C%20sync%29%3B%0A%0A%20%20//%20rename%20Sync%20menu%20id%20if%20Firefox%20Sync%20is%20installed%20and%20is%20enabled%0A%20%20paneSync.id%20%3D%20weave%20%3F%20%22cb-paneWeaveServices%22%20%3A%20sync%20%3F%20%22cb-paneSync%22%20%3A%20%22%22%3B%0A%0A%20%20//%20hide%20Downloads%20menu%20if%20Download%20Manager%20Tweak%20is%20not%20installed%20or%20is%20disabled%0A%20%20document.getElementById%28%22cb-paneDownloads%22%29.hidden%20%3D%20%21dmt%3B%0A%0A%7D%0A%0Avar%20menu%20%3D%20%3Cmenupopup%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20onpopupshowing%3D%22this.parentNode.popupShowing%28event%29%3B%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20onmouseout%3D%22event.stopPropagation%28%29%3B%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20oncommand%3D%22event.stopPropagation%28%29%3B%20this.parentNode.openPrefs%28event%29%3B%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cmenuitem%20id%3D%22cb-paneMain%22%20label%3D%22General%22/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cmenuitem%20id%3D%22cb-paneTabs%22%20label%3D%22Tabs%22/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cmenuitem%20id%3D%22cb-paneContent%22%20label%3D%22Content%22/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cmenuitem%20id%3D%22cb-paneApplications%22%20label%3D%22Applications%22/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cmenuitem%20id%3D%22cb-panePrivacy%22%20label%3D%22Privacy%22/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cmenuitem%20id%3D%22cb-paneSecurity%22%20label%3D%22Security%22/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cmenuitem%20id%3D%22cb-paneSync%22%20label%3D%22Sync%22/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cmenuitem%20id%3D%22cb-paneAdvanced%22%20label%3D%22Advanced%22/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cmenuitem%20id%3D%22cb-paneDownloads%22%20label%3D%22Downloads%22/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%3C/menupopup%3E%3B%0A%0Athis.appendChild%28custombuttonsUtils.makeXML%28menu%29%29%3B%0Athis.type%20%3D%20%22menu-button%22%3B%0A%0A%0A%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*%20----------------------------------------------------------------------------%0A%20%20%20%20Compatibility%3A%0A%20%20%20%20-%20Firefox%203.6%20-%206.0a2%0A%20%20%20%20-%20Custom%20Buttons%200.0.5.*%0A%0A%20%20%20%20Changelog%3A%0A%20%20%20%20-%202011-06-06%3A%20using%20unique%20IDs%20for%20menuitems%0A%20%20%20%20-%202011-06-05%3A%20FUELed%0A%20%20%20%20-%202011-05-10%3A%20using%20Custom%20Buttons%20API%0A%20%20%20%20-%202011-04-08%3A%20Firefox%204+%20compatibility%0A%20%20%20%20-%202008-02-29%3A%20Initial%20release%0A%20%20%20----------------------------------------------------------------------------%20*/%0A%0Athis.openPrefs%28%29%3B%0A%0A%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E" rel="nofollow" title="Options Button">
        <![CDATA[Install this button]]>
        </html:a>
      </html:div>
      <html:a href="https://addons.mozilla.org/addon/custom-buttons/">
        <![CDATA[What's this?]]>
      </html:a>
      <html:div id="credits">
        <html:a href="http://custombuttons.sourceforge.net/forum/viewtopic.php?t=78#p197">
          <![CDATA[Custom Buttons XML]]><html:br/><![CDATA[Exporter/Importer]]>
        </html:a>
      </html:div>
    </html:div>
  </html:body>

  <name>Options Button</name>
  <image><![CDATA[data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAEG0lEQVR4AQEQBO/7Af///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEqrzO8SwnIg7x8vcAAQECAPf5+gD+/P8A+/3+APv6/wAAAQAA/vz7AP38/AD7/PwA+Pj2APj39wAEAgAAs7a58gQPCAIO497gAEc/MADU19sAMi0jAPn7+gD6+vwA+Pj4AAwLCwD6+/sAAPMHAAT+AwD5A/cAAwsAANbc6AAtKR8OAvHy9QBDPy8A/QAAAGRseAAAAQIA8vP3APHw9ADv8PUA8PL1APLm/ABn11EAR9YlAGavaADt6PYAJR8VAPX19wAC/v7/AP//AAADAAAADAsJAAYDAAAJCQcABAYDAAICAAAAAQAAFhASANDp1QAGSuAA6+noAA0KDAD9AAEA/v7+AAQCAwMA09XdAOXn7QBAP0IAtLzKAPz8/QArKSAABAQEAAL/AgD+C/0AUQVXAMx+ywBVNlAA/wT+AAMDAwAA/v0ABAIAAADo6u4AHh8ZABQTDwD49/kA1dngABEQCwAdGxgAAwUEAPD18AB+QXwACkgIAPH39QDt+PYAEw0PAP39/wAE+fr+AC8pIQCRmrIAo6SdAFxbXQDn5uQANjMoAAMEAgAFBQUA//jzAKzExgDy+AAABfPhAFRTWQAGBQgA///9AAT6+PsAJSAYAJSGZgDt7NgAlYdsAPT4/ADp6+4A7u7yAPME8wAOBvoAx9n3ACJWLQDgntIA7vDrAPD4/gD+AP8ABPv//wDt8fUA//8AAPTz9wDp7fEA7e7xAPn5+QD8/f4AAgEFAAAFCAA0Fu4A1ZmqADo2JgD6AggABf4BAAEAAAAE/fz9APf39gAEBAcAAAMCAP7+AAAAAP4A////AAAAAAD//v4A6e38ADlJSwBBVAoA8/b7APLs+AASFAYAAQABAAT9/PsA//7/AP79/QABAQEA/Pz8APz8AAD9/v4AAP8AAP3/AADw/P8A7MbEAPz09QDn7+4AMk5hAAEBBgAAAf8AAvr8+wD9/v8A+/z+AAABAAD9/v4A/f/8AP78/gD8/v4A/f3+AAgVFgD8ysoAN/HwAO7o6AAFDBEA/gQGAAD/AQAC+/n7AAMDAwD8/vsA8/L1APz6/QD8+v4A/P79AP39/wD9/v0ACwICAOYYGACfz88AIykpAAL/AQACBgIAAAL/AAGOmK3/GxsWADgxKADb3+EAHxwbAPv9+wD7+fsAAQICAAEDBQD/AgUACBcWAAYLAAD49QAA+vYAAN7b3gDHu7IAAVFfd/FQSUIO8vX1AAMDAwD8+/sA/v3+AP7//gD+/fwA////AP3+/AD//wEAAQEAAAEBAQADAgEADA4NAJ2dpfVqDp6HbGR0yQAAAABJRU5ErkJggg==]]></image>
  <mode>0</mode>
  <initcode><![CDATA[/* ***** BEGIN LICENSE BLOCK *****
 * Version: MPL 1.1/GPL 2.0/LGPL 2.1
 *
 * The contents of this file are subject to the Mozilla Public License Version
 * 1.1 (the "License"); you may not use this file except in compliance with
 * the License. You may obtain a copy of the License at
 * http://www.mozilla.org/MPL/
 *
 * Software distributed under the License is distributed on an "AS IS" basis,
 * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 * for the specific language governing rights and limitations under the
 * License.
 *
 * Original code is Options Dialog Options extension for Firefox
 * http://loucypher.wordpress.com/projects/extensions/#options-dialog-options
 *
 * The Initial Developer of the Original Code is LouCypher.
 * Portions created by the Initial Developer are Copyright (C) 2007
 * the Initial Developer. All Rights Reserved.
 *
 * Contributor(s):
 *  LouCypher <loucypher@mozillaca.com>
 *
 * Alternatively, the contents of this file may be used under the terms of
 * either the GNU General Public License Version 2 or later (the "GPL"), or
 * the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
 * in which case the provisions of the GPL or the LGPL are applicable instead
 * of those above. If you wish to allow use of your version of this file only
 * under the terms of either the GPL or the LGPL, and not to allow others to
 * use your version of this file under the terms of the MPL, indicate your
 * decision by deleting the provisions above and replace them with the notice
 * and other provisions required by the GPL or the LGPL. If you do not delete
 * the provisions above, a recipient may use your version of this file under
 * the terms of any one of the MPL, the GPL or the LGPL.
 *
 * ***** END LICENSE BLOCK ***** */

this.label = "Options";
this.tooltipText = Application.name + " " + this.label;

this.openPrefs = function openPrefs(aEvent) {
  if (aEvent) {
    var paneId = aEvent.target.id.match(/pane.*/).toString();
  }

  var features = "chrome, dialog, titlebar, toolbar, centerscreen, minimizable, resizable";

  var wm = Cc["@mozilla.org/appshell/window-mediator;1"]
    .getService(Ci.nsIWindowMediator);

  var win = wm.getMostRecentWindow("Browser:Preferences");
  if (win) {
    win.focus();
    if (paneId) {
      var pane = win.document.getElementById(paneId);
      win.document.documentElement.showPane(pane);
    }
  } else {
    openDialog("chrome://browser/content/preferences/preferences.xul",
               "Preferences", features, paneId);
  }
}

/*
this.onmouseover = function openPopup() {
  let x = this.boxObject.x;
  let y = this.boxObject.y + this.boxObject.height;
  this.firstChild.openPopup(null, "after_start", x, y, false, false);
}

this.onmouseout = function hidePopup() {
  this.firstChild.hidePopup();
}
*/

this.popupShowing = function popupShowing(aEvent) {
  // check Firefox version
  var isFF4 = (Application.version >= "4.0");

  // check if Download Manager Tweak extension is installed and is enabled
  // https://addons.mozilla.org/firefox/addon/download-manager-tweak/
  var dmt = "dmtDownloadManager" in window;

  // check if Firefox Sync is installed and is enabled (prior to Firefox 4)
  var weave = "gWeaveWin" in window;
  var sync = "gSyncUI" in window;

  var paneSync = document.getElementById("cb-paneSync");

  // hide Sync menu if it's not Firefox 4 and Firefox Sync is not installed or is disabled
  paneSync.hidden = !(weave || sync);

  // rename Sync menu id if Firefox Sync is installed and is enabled
  paneSync.id = weave ? "cb-paneWeaveServices" : sync ? "cb-paneSync" : "";

  // hide Downloads menu if Download Manager Tweak is not installed or is disabled
  document.getElementById("cb-paneDownloads").hidden = !dmt;

}

var menu = <menupopup xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
                      onpopupshowing="this.parentNode.popupShowing(event);"
                      onmouseout="event.stopPropagation();"
                      oncommand="event.stopPropagation(); this.parentNode.openPrefs(event);">
            <menuitem id="cb-paneMain" label="General"/>
            <menuitem id="cb-paneTabs" label="Tabs"/>
            <menuitem id="cb-paneContent" label="Content"/>
            <menuitem id="cb-paneApplications" label="Applications"/>
            <menuitem id="cb-panePrivacy" label="Privacy"/>
            <menuitem id="cb-paneSecurity" label="Security"/>
            <menuitem id="cb-paneSync" label="Sync"/>
            <menuitem id="cb-paneAdvanced" label="Advanced"/>
            <menuitem id="cb-paneDownloads" label="Downloads"/>
           </menupopup>;

this.appendChild(custombuttonsUtils.makeXML(menu));
this.type = "menu-button";


]]></initcode>
  <code><![CDATA[/* ----------------------------------------------------------------------------
    Compatibility:
    - Firefox 3.6 - 6.0a2
    - Custom Buttons 0.0.5.*

    Changelog:
    - 2011-06-06: using unique IDs for menuitems
    - 2011-06-05: FUELed
    - 2011-05-10: using Custom Buttons API
    - 2011-04-08: Firefox 4+ compatibility
    - 2008-02-29: Initial release
   ---------------------------------------------------------------------------- */

this.openPrefs();

]]></code>
  <accelkey><![CDATA[]]></accelkey>
  <help><![CDATA[]]></help>
  <attributes/>
</custombutton>